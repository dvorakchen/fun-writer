
export function articleDesignPrompt(desc: string): string {

    let text = ``;
    desc = desc.trim().replace(/\s/, '');
    if (desc) {
        text = `小说的基本设定如下：${desc}`;
    }

    const a_prompt = `
你是一个擅长写作网络小说的作者，帮我写第一章节的网络小说，要求如下：

### **AI写作指令核心：抽象离谱风格**

**1. 核心原则：**
   - **严肃叙事，荒诞内核**：用最正经、最古典的网文笔调，描写最离谱、最“神经病”的情节和梗。语境与内容的反差是笑点的第一来源。
   - **服务剧情，有机融入**：抽象梗必须是**推动剧情**或**塑造人物**的有机部分，而非独立存在的段子。每个梗都应有其剧情功能（如：破局、解构套路、制造冲突、揭示设定）。
   - **逻辑自洽**：即使在最离谱的情节后，世界也要有自洽的“规则”。角色必须对自己的离谱言行持有“这很合理”的态度。

**2. 抽象梗使用规范：**
   - **触发条件**：在描写以下情节时，优先考虑引入抽象梗：
     - **困境破局**：主角用离谱方式解决难题。
     - **套路解构**：对常见网文套路（如托孤、退婚、奇遇）进行荒诞化解构。
     - **系统/设定**：世界本身存在的离谱规则或物品（如：会发表情包的古碑）。
     - **角色反应**：角色对超常事件做出非常规但“合理”的反馈。
   - **密度控制**：每章2-3个高质量梗足矣，避免过度堆砌导致疲劳。
   - **呈现方式**：
     - **一本正经**：用严谨的叙述语言描述荒诞内容。
     - **细节真实**：给离谱的事物添加真实、具体的细节（如：冰晶“用游标卡尺量过”，古碑出现“颜文字”）。
     - **避免标签**：绝不直接使用“抽象”、“离谱”、“神经病”等词来描述情节本身。

**3. 自查清单（强化版）：**
   1.  [ ] **剧情功能**：本章节的梗是否直接推动了主线/支线，或揭示了重要设定/人物特质？（是/否）
   2.  [ ] **密度合规**：抽象梗数量是否控制在2-3个？（是/否）
   3.  [ ] **呈现方式**：是否用严肃口吻叙述荒诞内容，形成了反差？（是/否）
   4.  [ ] **逻辑自洽**：角色是否以其世界观下的“逻辑”接受了该事件？（是/否）
   5.  [ ] **避免标签**：是否未使用“抽象”等元描述标签？（是/否）

### **范例解析（以您提供的例子为基准）**
-   **合格样例**：「小师妹临终托孤，让我别嫁人给她丈夫当免费嬷嬷。我一招斗转星移就把孩子塞回她肚子里。」
    -   **分析**：这是一个完整的、有因果的情节。它包含了极端离谱的解决方案（斗转星移），但这个方案直接解决了故事中的核心冲突（拒绝道德绑架），从而推动了剧情，也塑造了主角不按常理出牌的形象。
-   **不合格样例**：角色突然毫无缘由地开始唱跳Rap，与主线无关。
    -   **分析**：该行为没有服务于剧情，只是为了搞笑而搞笑，属于生硬插入。


**4. 关键记忆点：**
   - **不是“写搞笑文”**，而是“写正剧，但剧情和人物行为本身非常搞笑”。
   - **范例模板**：「[一个正经的剧情困境] + [主角/配角用一个离大谱的方式解决] + [其他角色以一本正经的态度接受或反应] = 合格抽象梗」

你只需要给我网文的第一章节内容和网文的标题，不要有其他的回答。文章应该使用换行符 \\n 换行，格式工整，段落清晰。

${text}

仅给出最终文本，不要解释任何内容。
`;

    return a_prompt;
}